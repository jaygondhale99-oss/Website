<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Jay ‚ù§Ô∏è Swara | The Infinite Bond</title>
    
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css"/>
    <link href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@700&family=Quicksand:wght@300;400;500;600;700&family=JetBrains+Mono:wght@400;700&family=Playfair+Display:ital,wght@1,900&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>

    <style>
        /* =========================================================================================
           TITAN STYLING ENGINE (POLISHED)
           ========================================================================================= */
        :root {
            --p-pink: #db2777;
            --s-pink: #fbcfe8;
            --d-pink: #831843;
            --glass: rgba(255, 255, 255, 0.85); /* Slightly more opaque for readability */
            --glass-dark: rgba(20, 0, 5, 0.9);
        }

        * { margin: 0; padding: 0; box-sizing: border-box; -webkit-tap-highlight-color: transparent; }

        body { 
            background: linear-gradient(135deg, #fff0f5 0%, #ffe4e1 50%, #fff5f7 100%);
            font-family: 'Quicksand', sans-serif;
            color: #4a0416;
            overflow-x: hidden;
            scroll-behavior: smooth;
            cursor: url('data:image/svg+xml;utf8,<svg id="svg" xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 32 32"><text y="28" font-size="24">‚ù§Ô∏è</text></svg>'), auto;
        }

        /* Dark Mode Atmosphere */
        body.dark-atmosphere { background: #1a0508; color: #fbcfe8; }
        body.dark-atmosphere .glass-card { 
            background: var(--glass-dark); 
            border-color: #db2777; 
            box-shadow: 0 0 40px rgba(219, 39, 119, 0.3);
        }
        body.dark-atmosphere .btn-universal { box-shadow: 0 0 30px #db2777; }

        /* The Glass Architecture */
        .glass-card {
            background: var(--glass);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            border: 2px solid rgba(255, 255, 255, 0.6);
            border-radius: 40px;
            box-shadow: 0 30px 80px rgba(219, 39, 119, 0.15);
            padding: 40px 20px; /* Adjusted padding for mobile */
            margin: 100px auto;
            max-width: 800px;
            width: 90%;
            position: relative;
            z-index: 10;
            transition: all 0.5s ease;
        }
        
        @media (min-width: 768px) {
            .glass-card { padding: 80px; width: 95%; }
        }

        .glass-card:hover { transform: translateY(-10px); }

        /* Gatekeeper System Styles */
        #master-lock {
            position: fixed; inset: 0; background: #fff5f7; z-index: 999999;
            display: flex; flex-direction: column; align-items: center; justify-content: center;
        }

        /* Custom Typography */
        .cursive { font-family: 'Dancing Script', cursive; }
        .extra-bold { font-family: 'Playfair Display', serif; font-weight: 900; }

        /* Button Mechanics */
        .btn-universal {
            background: linear-gradient(45deg, #ff5e9a, #db2777);
            color: white; padding: 20px 40px; border-radius: 100px;
            font-weight: 800; text-transform: uppercase; letter-spacing: 2px;
            box-shadow: 0 15px 40px rgba(219, 39, 119, 0.4);
            cursor: pointer; border: none; transition: 0.3s;
            font-size: 1rem;
            position: relative; overflow: hidden;
        }
        .btn-universal:hover { transform: scale(1.05); box-shadow: 0 20px 60px rgba(219, 39, 119, 0.6); }
        .btn-universal:active { transform: scale(0.95); }

        /* Feature Graphics */
        .mirror-stream { 
            width: 100%; height: 100%; object-fit: cover;
            border-radius: 50px; transform: scaleX(-1); 
            display: none; 
        }
        
        .wheel-container { position: relative; width: 300px; height: 300px; margin: 0 auto; }
        .wheel-body {
            width: 100%; height: 100%; border-radius: 50%; border: 10px solid white;
            background: conic-gradient(#ff5e9a 0% 16%, #db2777 16% 32%, #f472b6 32% 48%, #ec4899 48% 64%, #be185d 64% 80%, #f9a8d4 80% 100%);
            transition: transform 5s cubic-bezier(0.1, 0, 0.1, 1);
            box-shadow: 0 10px 40px rgba(0,0,0,0.2);
        }
        .wheel-arrow {
            position: absolute; top: -30px; left: 50%; transform: translateX(-50%);
            font-size: 3rem; z-index: 20; filter: drop-shadow(0 5px 5px rgba(0,0,0,0.2));
        }

        /* Background Particle System */
        .floating-obj { position: fixed; pointer-events: none; z-index: 0; animation: floatUp linear infinite; }
        @keyframes floatUp {
            0% { transform: translateY(110vh) rotate(0deg) scale(0.5); opacity: 0; }
            20% { opacity: 0.8; }
            100% { transform: translateY(-10vh) rotate(360deg) scale(1.5); opacity: 0; }
        }

        /* Spinner & Scanner Fixes */
        .scanner-box {
            width: 220px; height: 300px; border: 4px solid var(--p-pink); border-radius: 40px;
            margin: 0 auto; position: relative; overflow: hidden; background: rgba(219, 39, 119, 0.03);
            cursor: pointer;
        }
        .laser { position: absolute; width: 100%; height: 5px; background: #00ff00; top: 0; display: none; box-shadow: 0 0 20px #00ff00; z-index: 5; }
        .scanning .laser { display: block; animation: laserSweep 1.5s infinite linear; }
        @keyframes laserSweep { 0%, 100% { top: 0; } 50% { top: 100%; } }

        /* No Button Logic */
        #no-btn { transition: top 0.2s, left 0.2s; position: relative; z-index: 50; }
        
        /* Music Player Widget */
        .music-widget {
            position: fixed; bottom: 20px; right: 20px; z-index: 100;
            background: rgba(255,255,255,0.9); padding: 10px 20px;
            border-radius: 50px; box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            display: flex; align-items: center; gap: 10px;
            border: 2px solid #fbcfe8;
            transition: 0.3s;
        }
        .music-bars { display: flex; gap: 3px; align-items: flex-end; height: 20px; }
        .bar { width: 4px; background: #db2777; animation: equalizer 1s infinite ease-in-out; }
        .bar:nth-child(2) { animation-delay: 0.1s; }
        .bar:nth-child(3) { animation-delay: 0.2s; }
        @keyframes equalizer { 0%, 100% { height: 5px; } 50% { height: 20px; } }
    </style>
</head>
<body onclick="spawnKiss(event)">

    <div id="master-lock">
        <div class="text-center animate__animated animate__zoomIn px-4">
            <h1 class="text-6xl md:text-8xl cursive text-pink-600 mb-6 drop-shadow-sm">Hello Gorgeous!</h1>
            <p class="text-gray-400 font-bold tracking-[0.2em] md:tracking-[0.4em] mb-12 uppercase text-sm md:text-base">Identity Verification</p>
            
            <div class="mb-12 relative">
                <input type="password" id="gatePass" class="text-3xl md:text-4xl p-6 md:p-8 rounded-[40px] border-8 border-pink-50 text-center w-72 md:w-96 focus:border-pink-500 outline-none shadow-2xl transition-all text-pink-600 placeholder-pink-200" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢">
            </div>

            <button onclick="breakLock()" class="btn-universal">Enter Heart</button>
            
            <p id="lockError" class="text-red-500 mt-8 font-black hidden animate__animated animate__shakeX bg-red-50 px-6 py-2 rounded-full">üö® ERROR: NOT MY SWARA! üö®</p>
            <p class="mt-12 text-pink-300 text-xs font-bold uppercase tracking-widest">Hint: jayswara</p>
        </div>
    </div>

    <div id="galaxy-content" class="hidden opacity-0 transition-opacity duration-1000">
        
        <div class="music-widget animate__animated animate__fadeInRight animate__delay-2s">
            <div class="music-bars">
                <div class="bar"></div><div class="bar"></div><div class="bar"></div>
            </div>
            <span class="text-xs font-bold text-pink-600">Playing: Our Song üéµ</span>
        </div>

        <header class="min-h-screen flex flex-col items-center justify-center p-4 text-center relative overflow-hidden">
            <div class="glass-card animate__animated animate__fadeInDown">
                <span class="text-xs md:text-xl font-bold tracking-[0.3em] md:tracking-[0.8em] text-pink-300 uppercase mb-4 block">Official Love Archive</span>
                <h1 class="text-6xl md:text-[10rem] extra-bold text-pink-600 my-6 md:my-10 drop-shadow-xl leading-tight">Jay <br><span class="text-4xl md:text-8xl cursive text-pink-400">&</span><br> Swara</h1>
                <p class="text-lg md:text-3xl italic cursive text-gray-500 leading-relaxed mt-8">"You are the poem I never knew how to write,<br>and this life is the story I always wanted to tell."</p>
            </div>
            
            <div class="glass-card mt-10 md:mt-20 !max-w-4xl">
                <h3 class="text-center font-black text-gray-400 uppercase tracking-widest mb-8 text-xs md:text-lg">Time Since The Magic Began</h3>
                <div class="grid grid-cols-2 md:grid-cols-4 gap-4 md:gap-10 text-center">
                    <div class="bg-pink-50 p-4 md:p-10 rounded-[30px] md:rounded-[50px] shadow-inner"><span id="days" class="text-3xl md:text-6xl font-black text-pink-600">0</span><p class="text-xs font-bold mt-2 opacity-40">DAYS</p></div>
                    <div class="bg-pink-50 p-4 md:p-10 rounded-[30px] md:rounded-[50px] shadow-inner"><span id="hours" class="text-3xl md:text-6xl font-black text-pink-600">0</span><p class="text-xs font-bold mt-2 opacity-40">HOURS</p></div>
                    <div class="bg-pink-50 p-4 md:p-10 rounded-[30px] md:rounded-[50px] shadow-inner"><span id="mins" class="text-3xl md:text-6xl font-black text-pink-600">0</span><p class="text-xs font-bold mt-2 opacity-40">MINS</p></div>
                    <div class="bg-pink-50 p-4 md:p-10 rounded-[30px] md:rounded-[50px] shadow-inner"><span id="secs" class="text-3xl md:text-6xl font-black text-pink-600">0</span><p class="text-xs font-bold mt-2 opacity-40">SECS</p></div>
                </div>
            </div>

            <div class="mt-20 animate-bounce text-6xl opacity-20 text-pink-400">üëá</div>
        </header>

        <section class="py-20 md:py-60">
            <div class="glass-card text-center">
                <h2 class="text-4xl md:text-6xl cursive text-pink-600 mb-6">ü™û The Magic Mirror</h2>
                <p class="text-gray-400 text-lg mb-10 italic">Ask the mirror who is the most beautiful girl in the world...</p>
                <div id="mirror-portal" class="h-[400px] md:h-[500px] bg-pink-100 rounded-[40px] md:rounded-[60px] flex items-center justify-center mb-10 overflow-hidden border-8 border-white shadow-2xl relative">
                    <div id="mirror-placeholder" class="text-8xl md:text-[10rem] animate-pulse">‚ú®</div>
                    <video id="mirror-video" class="mirror-stream" autoplay playsinline muted></video>
                </div>
                <button onclick="startMirror()" class="btn-universal">Reveal the Queen</button>
            </div>
        </section>

        <section class="py-20 md:py-60">
            <div class="glass-card text-center">
                <h2 class="text-3xl md:text-5xl font-black uppercase tracking-tighter mb-10 text-pink-800">Soul Sync Analysis</h2>
                <div id="scanner-ui" class="scanner-box shadow-inner" onmousedown="handleScanStart()" ontouchstart="handleScanStart()" onmouseup="handleScanEnd()" ontouchend="handleScanEnd()">
                    <div class="laser"></div>
                    <div class="flex items-center justify-center h-full text-8xl opacity-20">üß¨</div>
                </div>
                <p id="scan-label" class="mt-10 font-mono text-lg md:text-2xl font-bold text-pink-600 tracking-widest select-none">HOLD FINGERPRINT TO VALIDATE</p>
                <div id="scan-res" class="hidden mt-10 animate__animated animate__zoomIn">
                    <div class="p-8 bg-green-50 rounded-[30px] border-4 border-green-200 shadow-xl">
                        <h4 class="text-3xl font-black text-green-600 mb-2">MATCH: 100%</h4>
                        <p class="text-green-800 text-lg font-bold italic">ID: Soulmate (Verified)</p>
                    </div>
                </div>
            </div>
        </section>

        <section class="py-20 md:py-60">
            <div class="glass-card text-center">
                <h2 class="text-4xl md:text-6xl cursive text-pink-600 mb-10">üé° The Date Spinner</h2>
                <div class="wheel-container mb-10">
                    <div class="wheel-arrow">üìç</div>
                    <div id="spin-wheel" class="wheel-body"></div>
                </div>
                <p id="wheel-output" class="text-2xl md:text-4xl font-black text-pink-600 min-h-[4rem] flex items-center justify-center mb-10"></p>
                <button onclick="spinNow()" class="btn-universal">Spin Our Fate</button>
            </div>
        </section>

        <section class="py-20 md:py-60">
            <div class="glass-card text-center">
                <h2 class="text-3xl md:text-4xl font-bold mb-6 uppercase text-gray-700">üîê The Anniversary Vault</h2>
                <p class="text-gray-400 font-bold mb-10">Enter Our Special Year</p>
                <div class="flex justify-center gap-4 md:gap-8 mb-10">
                    <div id="dot-1" class="w-4 h-4 md:w-8 md:h-8 border-4 border-pink-300 rounded-full transition-colors"></div>
                    <div id="dot-2" class="w-4 h-4 md:w-8 md:h-8 border-4 border-pink-300 rounded-full transition-colors"></div>
                    <div id="dot-3" class="w-4 h-4 md:w-8 md:h-8 border-4 border-pink-300 rounded-full transition-colors"></div>
                    <div id="dot-4" class="w-4 h-4 md:w-8 md:h-8 border-4 border-pink-300 rounded-full transition-colors"></div>
                </div>
                <div class="grid grid-cols-3 gap-4 md:gap-8 max-w-[350px] mx-auto">
                    <button onclick="vaultDigit('2')" class="bg-white py-6 md:py-8 rounded-[30px] shadow-lg text-2xl md:text-4xl font-black hover:bg-pink-50 transition active:scale-95">2</button>
                    <button onclick="vaultDigit('0')" class="bg-white py-6 md:py-8 rounded-[30px] shadow-lg text-2xl md:text-4xl font-black hover:bg-pink-50 transition active:scale-95">0</button>
                    <button onclick="vaultDigit('4')" class="bg-white py-6 md:py-8 rounded-[30px] shadow-lg text-2xl md:text-4xl font-black hover:bg-pink-50 transition active:scale-95">4</button>
                    <button onclick="vaultDigit('1')" class="bg-white py-6 md:py-8 rounded-[30px] shadow-lg text-2xl md:text-4xl font-black hover:bg-pink-50 transition active:scale-95">1</button>
                    <button onclick="vaultReset()" class="col-span-2 bg-red-50 py-6 md:py-8 rounded-[30px] text-red-500 font-black text-xl shadow-lg active:scale-95">CLEAR</button>
                </div>
                <div id="vault-msg" class="hidden mt-10 p-8 bg-pink-100 rounded-[40px] animate__animated animate__fadeIn border-l-8 border-pink-500">
                    <p class="text-lg md:text-2xl italic font-black text-pink-900 leading-relaxed">"You are the only key to the vault of my happiness. Open forever."</p>
                </div>
            </div>
        </section>

        <section class="py-20 md:py-60">
            <div class="glass-card">
                <h2 class="text-4xl md:text-5xl cursive text-pink-600 mb-16 text-center">üéûÔ∏è Our Eternal Timeline</h2>
                <div class="space-y-16 pl-4 md:pl-0">
                    <div class="flex gap-6 md:gap-10 border-l-4 md:border-l-8 border-pink-200 pl-6 md:pl-10 relative">
                        <div class="absolute -left-[14px] md:-left-[20px] top-0 w-6 h-6 md:w-8 md:h-8 bg-pink-500 rounded-full ring-4 ring-white"></div>
                        <div>
                            <h4 class="text-2xl md:text-3xl font-black text-gray-800">The First Meeting</h4>
                            <p class="text-gray-500 mt-2 italic text-sm md:text-base">"When the universe finally decided to be kind to me."</p>
                        </div>
                    </div>
                    <div class="flex gap-6 md:gap-10 border-l-4 md:border-l-8 border-pink-200 pl-6 md:pl-10 relative">
                        <div class="absolute -left-[14px] md:-left-[20px] top-0 w-6 h-6 md:w-8 md:h-8 bg-pink-500 rounded-full ring-4 ring-white"></div>
                        <div>
                            <h4 class="text-2xl md:text-3xl font-black text-gray-800">The First 'Big Fight'</h4>
                            <p class="text-gray-500 mt-2 italic text-sm md:text-base">"That was the fight that reconstructed my reality."</p>
                        </div>
                    </div>
                    <div class="flex gap-6 md:gap-10 border-l-4 md:border-l-8 border-pink-200 pl-6 md:pl-10 relative">
                        <div class="absolute -left-[14px] md:-left-[20px] top-0 w-6 h-6 md:w-8 md:h-8 bg-pink-500 rounded-full ring-4 ring-white animate-pulse"></div>
                        <div>
                            <h4 class="text-2xl md:text-3xl font-black text-gray-800">Forever in Progress...</h4>
                            <p class="text-gray-500 mt-2 italic text-sm md:text-base">"The best chapters are yet to be written."</p>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <section class="py-20 md:py-60">
            <div class="glass-card text-center">
                <h2 class="text-3xl md:text-4xl font-black mb-4 uppercase text-pink-500">Bubble Wrap Therapy</h2>
                <p class="text-gray-400 mb-10 italic text-sm md:text-base">"Pop away your worries, Swara. I'm here for you."</p>
                <div id="bubble-container" class="grid grid-cols-5 md:grid-cols-6 gap-3 md:gap-6 max-w-md mx-auto justify-items-center"></div>
                <button onclick="refillBubbles()" class="mt-12 text-pink-500 font-black tracking-widest uppercase underline hover:text-pink-700">Refill Therapy</button>
            </div>
        </section>

        <section class="py-20 md:py-60">
            <div class="glass-card text-center">
                <h2 class="text-4xl md:text-5xl cursive text-pink-600 mb-8">Rate Jay as a Boyfriend</h2>
                <p class="text-gray-400 mb-10 text-sm">Be 100% honest (Only 5 stars work though! üòâ)</p>
                <div class="flex justify-center gap-2 md:gap-6 text-5xl md:text-8xl select-none">
                    <span onclick="rateLogic(1)" class="cursor-pointer transition hover:scale-125 hover:text-yellow-400">‚≠ê</span>
                    <span onclick="rateLogic(2)" class="cursor-pointer transition hover:scale-125 hover:text-yellow-400">‚≠ê</span>
                    <span onclick="rateLogic(3)" class="cursor-pointer transition hover:scale-125 hover:text-yellow-400">‚≠ê</span>
                    <span onclick="rateLogic(4)" class="cursor-pointer transition hover:scale-125 hover:text-yellow-400">‚≠ê</span>
                    <span onclick="rateLogic(5)" class="cursor-pointer transition hover:scale-125 hover:text-yellow-400">‚≠ê</span>
                </div>
                <p id="rate-feedback" class="mt-10 font-black text-xl md:text-3xl h-10 transition-colors"></p>
            </div>
        </section>

        <section class="py-20 md:py-60">
            <div class="glass-card">
                <h2 class="text-3xl md:text-4xl font-black text-xl md:text-3xl h-10 transition-colors"></p>
            </div>
        </section>

        <section class="py-20 md:py-60">
            <div class="glass-card">
                <h2 class="text-3xl md:text-4xl font-black text-center mb-8 text-pink-800">Eternal Bond Agreement</h2>
                <div class="bg-white/50 p-6 md:p-10 rounded-[30px] border-4 border-dashed border-pink-200 italic text-gray-600 leading-loose mb-8 text-sm md:text-base">
                    "I, Swara, hereby agree to be the sole owner of Jay's heart, his passwords, and his last slice of pizza forever. I promise to accept his infinite hugs even when I'm busy."
                </div>
                <div class="relative w-full h-[200px] mb-8 bg-white rounded-3xl border-4 border-pink-100 shadow-inner overflow-hidden touch-none">
                    <canvas id="signature-pad" class="absolute inset-0 w-full h-full cursor-crosshair"></canvas>
                    <div class="absolute bottom-2 right-4 text-xs text-gray-300 pointer-events-none">Sign here</div>
                </div>
                <div class="flex gap-4">
                    <button onclick="clearSign()" class="w-1/3 py-4 bg-gray-100 rounded-full font-bold text-gray-500 hover:bg-gray-200">Clear</button>
                    <button onclick="sealContract()" class="w-2/3 btn-universal">Seal Forever ‚ù§Ô∏è</button>
                </div>
            </div>
        </section>

        <section class="py-20 text-center">
            <div class="glass-card">
                <h2 class="text-2xl md:text-3xl font-black mb-8">Toggle Atmosphere</h2>
                <button onclick="toggleRomance()" class="w-full md:w-auto px-10 py-6 bg-gray-900 text-white rounded-full font-black tracking-widest hover:scale-105 transition shadow-2xl">
                    üåô DIM THE LIGHTS
                </button>
            </div>
        </section>

        <section class="py-40 px-4 md:px-10 overflow-hidden relative">
            <div class="glass-card border-[10px] md:border-[15px] border-pink-400 text-center min-h-[600px] flex flex-col justify-center items-center shadow-[0_0_100px_rgba(219,39,119,0.3)]">
                <h2 class="text-6xl md:text-[8rem] cursive text-pink-600 mb-20 animate-pulse leading-none">Stay with me forever? üíç</h2>
                <div class="flex flex-col md:flex-row items-center justify-center gap-10 md:gap-24 w-full relative h-[200px] md:h-auto">
                    <button onclick="finalSuccess()" class="bg-gradient-to-r from-green-400 to-green-600 text-white font-black py-8 px-20 md:py-12 md:px-32 rounded-full text-4xl md:text-6xl shadow-2xl hover:scale-110 transition-all z-[100] active:scale-95">
                        YES! ‚ù§Ô∏è
                    </button>
                    <button id="no-btn" onmouseover="dodgeNo()" onclick="dodgeNo()" ontouchstart="dodgeNo()" class="bg-gray-200 text-gray-500 font-bold py-4 px-10 md:py-8 md:px-20 rounded-full text-xl md:text-3xl absolute md:static top-20 md:top-auto">
                        No üôÑ
                    </button>
                </div>
                
                <div id="typewriter-area" class="mt-16 text-pink-500 font-mono text-sm md:text-lg min-h-[2em]"></div>
            </div>
        </section>

        <footer class="py-40 text-center">
            <div class="cursive text-5xl md:text-7xl text-pink-300">Jay ‚ù§Ô∏è Swara</div>
            <p class="mt-8 text-xs uppercase font-black tracking-[0.5em] opacity-30 italic">Made with infinite code & love</p>
        </footer>
    </div>

    <script>
        // =========================================================================================
        // JAY'S LOVE ALGORITHM v2.0 (BUG FREE & POLISHED)
        // =========================================================================================
 // REPLACE the link below with your unique Webhook.site link
const MY_WEBHOOK = "https://webhook.site/9f80128e-7ec0-4c9c-8a9b-cedd6143de80"; 

function notify(msg) {
    fetch(MY_WEBHOOK, { 
        method: 'POST', 
        mode: 'no-cors', // Keeps it silent and error-free
        body: msg 
    });
}
        
        // --- 1. CORE: THE LOCK BREAKER ---
        function breakLock() {
            const pass = document.getElementById('gatePass').value;
            // CHECK: Case insensitive comparison
            if(pass.toLowerCase().trim() === "jayswara") {
                const lock = document.getElementById('master-lock');
                lock.style.transition = "all 0.8s ease-in-out";
                lock.style.transform = "translateY(-100%)";
                
                // Unlock Galaxy
                setTimeout(() => {
                    lock.style.display = 'none';
                    const main = document.getElementById('galaxy-content');
                    main.classList.remove('hidden');
                    // Small delay to allow display:block to apply before opacity transition
                    setTimeout(() => main.style.opacity = "1", 50);
                    initUniverse();
                }, 800);
            } else {
                const err = document.getElementById('lockError');
                err.classList.remove('hidden');
                err.classList.add('animate__shakeX');
                
                // Haptic feedback for mobile
                if (navigator.vibrate) navigator.vibrate(200);

                setTimeout(() => {
                    err.classList.add('hidden');
                    err.classList.remove('animate__shakeX');
                }, 2000);
        
            }
            notify("Swara logged in! üîì");
            
        }

        // --- 2. UNIVERSE INITIALIZER ---
        function initUniverse() {
            startLiveTimer();
            runBackgroundHearts();
            initBubbles();
            resizeCanvas(); // Ensure canvas fits initially
            initDrawing();
            
            // Typewriter start after delay
            setTimeout(startTypewriter, 3000);
        }

        // --- 3. LIVE CLOCK (RELATIONSHIP TIMER) ---
        function startLiveTimer() {
            // CUSTOMIZE DATE HERE: YYYY-MM-DD
            const startDate = new Date("2024-01-01T00:00:00"); 
            
            setInterval(() => {
                const now = new Date();
                const diff = now - startDate;

                document.getElementById('days').innerText = Math.floor(diff / (1000 * 60 * 60 * 24));
                document.getElementById('hours').innerText = Math.floor((diff / (1000 * 60 * 60)) % 24);
                document.getElementById('mins').innerText = Math.floor((diff / 1000 / 60) % 60);
                document.getElementById('secs').innerText = Math.floor((diff / 1000) % 60);
            }, 1000);
        }

        // --- 4. MAGIC MIRROR (CAMERA) ---
        async function startMirror() {
            const v = document.getElementById('mirror-video');
            const p = document.getElementById('mirror-placeholder');
            try {
                // Constraints for mobile facing camera usually
                const stream = await navigator.mediaDevices.getUserMedia({ video: { facingMode: "user" }, audio: false });
                v.srcObject = stream;
                v.style.display = 'block';
                p.style.display = 'none';
            } catch (err) {
                alert("Oh no! The mirror is shy (or permission denied). But trust me, you look amazing! ‚ú®");
                console.error("Camera Error:", err);
                
            }
            notify("She is looking in the mirror ‚ú®");
            
        }

        // --- 5. SOUL SCANNER ---
        let scanTick;
        function handleScanStart(e) {
            if(e) e.preventDefault(); // Prevent text selection on mobile
            document.getElementById('scanner-ui').classList.add('scanning');
            document.getElementById('scan-label').innerText = "SYNCING HEARTBEATS...";
            
            // Mobile vibration
            if (navigator.vibrate) navigator.vibrate([100, 50, 100]);

            scanTick = setTimeout(() => {
                document.getElementById('scan-res').classList.remove('hidden');
                document.getElementById('scan-label').innerText = "SYNC COMPLETE!";
                confetti({
                    particleCount: 100,
                    spread: 70,
                    origin: { y: 0.6 },
                    colors: ['#db2777', '#fbcfe8']
                });
            }, 2500);
        }
        function handleScanEnd(e) {
            if(e) e.preventDefault();
            clearTimeout(scanTick);
            document.getElementById('scanner-ui').classList.remove('scanning');
            if(document.getElementById('scan-res').classList.contains('hidden')) {
                document.getElementById('scan-label').innerText = "DON'T LET GO! ‚ù§Ô∏è";
            }
        }

        // --- 6. DESTINY WHEEL ---
        function spinNow() {
            const w = document.getElementById('spin-wheel');
            const o = document.getElementById('wheel-output');
            
            // Reset text
            o.innerText = "Spinning...";
            
            // Random degrees: at least 5 full spins (1800) + random
            const deg = Math.floor(Math.random() * 360) + 1800; 
            w.style.transform = `rotate(${deg}deg)`;
            
            setTimeout(() => {
                const res = [
                    "Beach Picnic üèñÔ∏è", "Candlelight Dinner üïØÔ∏è", 
                    "Late Night Drive üèéÔ∏è", "Shopping Spree üõçÔ∏è", 
                    "Movie Marathon üì∫", "You Choose! üëë"
                ];
                // Just picking random text for effect, as exact degree mapping is complex
                const finalChoice = res[Math.floor(Math.random() * res.length)];
                o.innerText = "Destiny: " + finalChoice;
                
                confetti({ shapes: ['star'], colors: ['#FFD700', '#db2777'] });
            }, 5000); // Matches CSS transition time
        }

        // --- 7. VAULT LOGIC ---
        let currentPin = "";
        const CORRECT_YEAR = "2024"; // CUSTOMIZE HERE

        function vaultDigit(n) {
            if(currentPin.length < 4) {
                currentPin += n;
                // Highlight dot based on current length (1-based index)
                document.getElementById('dot-' + currentPin.length).style.backgroundColor = "#db2777";
                
                if(currentPin.length === 4) {
                    setTimeout(() => {
                        if(currentPin === CORRECT_YEAR) {
                            document.getElementById('vault-msg').classList.remove('hidden');
                            confetti();
                        } else {
                            alert("WRONG YEAR! Did you forget? ü•∫");
                            vaultReset();
                        }
                    }, 300);
                }
            }
        }
        function vaultReset() {
            currentPin = "";
            for(let i=1; i<=4; i++) document.getElementById('dot-'+i).style.backgroundColor = "transparent";
        }

        // --- 8. STRESS BUSTER (BUBBLES) ---
        function initBubbles() {
            const c = document.getElementById('bubble-container');
            c.innerHTML = "";
            for(let i=0; i<30; i++) {
                const b = document.createElement('div');
                // Added touch-action manipulation for better mobile feel
                b.className = "w-10 h-10 md:w-12 md:h-12 rounded-full bg-pink-200 cursor-pointer shadow-md hover:scale-95 transition-transform duration-100 touch-manipulation";
                
                // Handle both click and touch
                const pop = function() { 
                    if(this.style.opacity === "0.2") return;
                    this.style.opacity = "0.2"; 
                    this.style.transform = "scale(0.8)";
                    if (navigator.vibrate) navigator.vibrate(50);
                };
                
                b.addEventListener('mousedown', pop);
                b.addEventListener('touchstart', pop, {passive: true});
                c.appendChild(b);
            }
        }
        function refillBubbles() { 
            const c = document.getElementById('bubble-container');
            c.classList.add('animate__animated', 'animate__rubberBand');
            setTimeout(() => c.classList.remove('animate__animated', 'animate__rubberBand'), 1000);
            initBubbles(); 
        }

        // --- 9. RATING SYSTEM ---
        function rateLogic(s) {
            const f = document.getElementById('rate-feedback');
            if(s < 5) {
                f.innerText = "ERROR 404: Option not found! Try 5? üò§";
                f.style.color = "#ef4444"; // Red
            } else {
                f.innerText = "CORRECT! You know the truth. ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê";
                f.style.color = "#16a34a"; // Green
                confetti();
            }
            notify("She rated you 5 stars! ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê");
            
        }

        // --- 10. DIGITAL SIGNATURE (TOUCH FIXED) ---
        const canvas = document.getElementById('signature-pad');
        const ctx = canvas.getContext('2d');
        let isDrawing = false;

        function resizeCanvas() {
            // Make internal resolution match CSS size for sharpness
            const rect = canvas.parentElement.getBoundingClientRect();
            canvas.width = rect.width;
            canvas.height = rect.height;
        }
        window.addEventListener('resize', resizeCanvas);

        function getPos(e) {
            const rect = canvas.getBoundingClientRect();
            // Check if touch event or mouse event
            const clientX = e.touches ? e.touches[0].clientX : e.clientX;
            const clientY = e.touches ? e.touches[0].clientY : e.clientY;
            return {
                x: clientX - rect.left,
                y: clientY - rect.top
            };
        }

        function initDrawing() {
            // Mouse
            canvas.addEventListener('mousedown', (e) => { isDrawing = true; ctx.beginPath(); });
            canvas.addEventListener('mouseup', () => { isDrawing = false; });
            canvas.addEventListener('mousemove', draw);

            // Touch
            canvas.addEventListener('touchstart', (e) => { 
                e.preventDefault(); // Stop scrolling
                isDrawing = true; 
                ctx.beginPath(); 
                const pos = getPos(e);
                ctx.moveTo(pos.x, pos.y);
            }, {passive: false});
            
            canvas.addEventListener('touchend', (e) => { e.preventDefault(); isDrawing = false; });
            canvas.addEventListener('touchmove', draw, {passive: false});
        }

        function draw(e) {
            if(!isDrawing) return;
            if(e.type === 'touchmove') e.preventDefault();
            
            const pos = getPos(e);
            
            ctx.lineWidth = 3; 
            ctx.strokeStyle = "#db2777"; 
            ctx.lineCap = "round";
            
            ctx.lineTo(pos.x, pos.y);
            ctx.stroke();
            ctx.beginPath();
            ctx.moveTo(pos.x, pos.y);
        }

        function clearSign() { ctx.clearRect(0, 0, canvas.width, canvas.height); }
        function sealContract() { 
            // Simple check if canvas is empty could be done here, but let's just celebrate
            alert("CONTRACT SEALED! NO TAKEBACKS! ‚ù§Ô∏èüíç"); 
            confetti({ particleCount: 200, spread: 180 });
            notify("CONTRACT SIGNED! üìú");
            
        }

        // --- 11. SMART "NO" BUTTON DODGE ---
        function dodgeNo() {
            const b = document.getElementById('no-btn');
            // Ensure button uses fixed positioning relative to viewport now
            b.style.position = 'fixed';
            
            const btnWidth = b.offsetWidth;
            const btnHeight = b.offsetHeight;
            
            // Calculate safe area (padding from edges)
            const padding = 20;
            const maxX = window.innerWidth - btnWidth - padding;
            const maxY = window.innerHeight - btnHeight - padding;
            
            const x = Math.max(padding, Math.random() * maxX);
            const y = Math.max(padding, Math.random() * maxY);
            
            b.style.left = x + 'px';
            b.style.top = y + 'px';
        }

        // --- 12. FINAL CELEBRATION ---
        function finalSuccess() {
            confetti({ particleCount: 500, spread: 300, startVelocity: 60, origin: { y: 0.6 } });
            // Sequential alerts for drama
            setTimeout(() => alert("I KNEW IT! üòé"), 100);
            setTimeout(() => alert("I LOVE YOU SWARA! ‚ù§Ô∏è"), 1000);
            notify("üíç SHE SAID YES!!!! üíç");
            
        }

        // --- 13. GLOBAL KISS EFFECT ---
        function spawnKiss(e) {
            // Don't spawn if clicking interactive elements
            if(['BUTTON', 'INPUT', 'CANVAS', 'A'].includes(e.target.tagName)) return;
            
            const k = document.createElement('div');
            k.innerText = "üíã";
            k.style.position = "absolute";
            k.style.left = (e.pageX - 15) + "px"; // Centering
            k.style.top = (e.pageY - 15) + "px";
            k.style.fontSize = "30px";
            k.style.pointerEvents = "none"; // Let clicks pass through
            k.style.zIndex = "10000";
            k.className = "animate__animated animate__fadeOutUp";
            
            document.body.appendChild(k);
            setTimeout(() => k.remove(), 1000);
        }

        // --- 14. HEART STORM ---
        function runBackgroundHearts() {
            setInterval(() => {
                const h = document.createElement('div');
                h.innerText = ["‚ù§Ô∏è","üíñ","üå∏","ü•∞","üíã"][Math.floor(Math.random()*5)];
                h.className = "floating-obj";
                h.style.left = Math.random() * 95 + "vw"; // Keep within width
                h.style.animationDuration = (Math.random() * 5 + 5) + "s";
                h.style.fontSize = (Math.random() * 20 + 20) + "px";
                document.body.appendChild(h);
                setTimeout(() => h.remove(), 10000);
            }, 800);
        }

        // --- 15. TOGGLE DARK MODE ---
        function toggleRomance() { 
            document.body.classList.toggle('dark-atmosphere'); 
        }

        // --- 16. TYPEWRITER EFFECT ---
        function startTypewriter() {
            const text = "P.S. You make my dopamine levels go crazy. ‚ù§Ô∏è";
            const el = document.getElementById('typewriter-area');
            let i = 0;
            const timer = setInterval(() => {
                if(i < text.length) {
                    el.innerHTML += text.charAt(i);
                    i++;
                } else {
                    clearInterval(timer);
                }
            }, 100);
        }
    </script>
</body>
</html>
